\usepackage{tikz}
\input{figures/tikzit.tikzstyles}
\input{figures/tikzit.tikzdefs}
\usetikzlibrary{backgrounds}
\usetikzlibrary{arrows}
\usetikzlibrary{shapes,shapes.geometric,shapes.misc}
\usetikzlibrary{shapes.misc, positioning}
\usepackage{physics}

% this style is applied by default to any tikzpicture included via \tikzfig
\tikzstyle{tikzfig}=[baseline=-0.25em,scale=0.5]

\tikzset{
    rect/.style={
        font=\small,
        top color=white,
        bottom color=blue!25,
        rectangle,
        rounded corners,
        minimum width=1em, 
        text width=2em,
        draw=blue!75,
        very thick,
        align=center,
        }
    }

% these are dummy properties used by TikZiT, but ignored by LaTex
\pgfkeys{/tikz/tikzit fill/.initial=0}
\pgfkeys{/tikz/tikzit draw/.initial=0}
\pgfkeys{/tikz/tikzit shape/.initial=0}
\pgfkeys{/tikz/tikzit category/.initial=0}

% standard layers used in .tikz files
\pgfdeclarelayer{edgelayer}
\pgfdeclarelayer{nodelayer}
\pgfsetlayers{background,edgelayer,nodelayer,main}

% style for blank nodes
\tikzstyle{none}=[inner sep=0mm]

% include a .tikz file
\newcommand{\tikzfig}[2]{%
{\tikzstyle{every picture}=[tikzfig]%
\scalebox{#1}{
\IfFileExists{#2.tikz}{\input{#2.tikz}}{%
\IfFileExists{./figures/#2.tikz}{\input{./figures/#2.tikz}}{}}{%
\IfFileExists{#2.pdf}{\includegraphics{#2.pdf}}{%
\IfFileExists{./figures/#2.pdf}{\includegraphics{./figures/#2.pdf}}{%
\IfFileExists{#2.pdf}{\includegraphics{#2.pdf}}{%
\IfFileExists{./figures/#2.pdf}{\includegraphics{./figures/#2.pdf}}{%
}
}}}}}}}

% the same as \tikzfig, but in a {center} environment
\newcommand{\tikzfigure}[3]{%
\begin{figure}[H]
\centering
  \tikzfig{1}{#1}
  \caption*{#2}
  \label{#3}
\end{figure}
}

% fix strange self-loops, which are PGF/TikZ default
\tikzstyle{every loop}=[]
